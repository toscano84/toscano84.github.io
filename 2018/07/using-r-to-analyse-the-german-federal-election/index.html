

  
    
  


  





  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.49.2 with theme Tranquilpeak 0.4.3-BETA">
    <title>Using R to analyse the German Federal Election</title>
    <meta name="author" content="Hugo Toscano">
    <meta name="keywords" content="">

    <link rel="icon" href="../../../favicon.png">
    

    
    <meta name="description" content="As the title of this post implies we will analyze, using the statistical programming language R, the German Federal Election which took place on 24 September of 2017. It will not be an exhaustive analysis of the results. I’m only interested in visualizing the share of the vote that each party represented in the Parliament (i.e. Bundestag) received in each one of the 16 States of Germany.
In order to make this visualization possible in R, loading the respective packages is the first step.">
    <meta property="og:description" content="As the title of this post implies we will analyze, using the statistical programming language R, the German Federal Election which took place on 24 September of 2017. It will not be an exhaustive analysis of the results. I’m only interested in visualizing the share of the vote that each party represented in the Parliament (i.e. Bundestag) received in each one of the 16 States of Germany.
In order to make this visualization possible in R, loading the respective packages is the first step.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Using R to analyse the German Federal Election">
    <meta property="og:url" content="/2018/07/using-r-to-analyse-the-german-federal-election/">
    <meta property="og:site_name" content="Hugo Toscano">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Hugo Toscano">
    <meta name="twitter:description" content="As the title of this post implies we will analyze, using the statistical programming language R, the German Federal Election which took place on 24 September of 2017. It will not be an exhaustive analysis of the results. I’m only interested in visualizing the share of the vote that each party represented in the Parliament (i.e. Bundestag) received in each one of the 16 States of Germany.
In order to make this visualization possible in R, loading the respective packages is the first step.">
    
    

    
    

    
      <meta property="og:image" content="https://res.cloudinary.com/dabczf7ag/image/upload/v1528704790/foto1.jpg">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="../../../css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="../../../">Hugo Toscano</a>
  </div>
  
    
      <a class="header-right-picture "
         href="../../../#about">
    
    
    
      
        <img class="header-picture" src="https://res.cloudinary.com/dabczf7ag/image/upload/v1528704790/foto1.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="../../../#about">
          <img class="sidebar-profile-picture" src="https://res.cloudinary.com/dabczf7ag/image/upload/v1528704790/foto1.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Hugo Toscano</h4>
        
          <h5 class="sidebar-profile-bio">Contact: hugo_toscano@outlook.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../2018/07/about-me/">
    
      <i class="sidebar-button-icon fa fa-lg fa-user"></i>
      
      <span class="sidebar-button-desc">About me</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-search"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/toscano84" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/hugo-toscano-56766a2a/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/htoscano84" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Using R to analyse the German Federal Election
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-07-05T00:00:00Z">
        
  July 5, 2018

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="../../../categories/ggplot2">ggplot2</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>As the title of this post implies we will analyze, using the statistical programming language R, the German Federal Election which took place on 24 September of 2017. It will not be an exhaustive analysis of the results. I’m only interested in visualizing the share of the vote that each party represented in the Parliament (i.e. Bundestag) received in each one of the 16 States of Germany.</p>
<p>In order to make this visualization possible in R, loading the respective packages is the first step.</p>
<pre class="r"><code># libraries needed

library(tidyverse) # load packages related to data cleaning (e.g. dplyr) and data visualization(ggplot2)
library(rgdal) # load shape files
library(broom) # transform shape files in data frames
library(readxl) # load excel files
library(here) # creates a path to the current directory
library(extrafont) # add new fonts</code></pre>
<p>Next, we need to get the file with the German Election results. We can get it from the Federal Returning Officer - <a href="https://www.bundeswahlleiter.de/en/bundestagswahlen/2017/ergebnisse.html" class="uri">https://www.bundeswahlleiter.de/en/bundestagswahlen/2017/ergebnisse.html</a></p>
<p>After the file is opened in Excel, we save it as .xlsx file in our working directory of R. Then, use the <code>read_excel()</code> function to load the file. We can also use the skip argument, as the first 5 rows of the spreadsheet are unnecessary.</p>
<pre class="r"><code># load file
germany_elections_untidy &lt;- read_excel(here::here(&quot;btw17_kerg.xlsx&quot;), 
                                       skip = 5) 

# check file
glimpse(germany_elections_untidy)</code></pre>
<pre><code>## Observations: 334
## Variables: 191
## $ Nr                                                                                              &lt;dbl&gt; ...
## $ Gebiet                                                                                          &lt;chr&gt; ...
## $ `gehört zu`                                                                                     &lt;dbl&gt; ...
## $ Wahlberechtigte                                                                                 &lt;chr&gt; ...
## $ X__1                                                                                            &lt;chr&gt; ...
## $ X__2                                                                                            &lt;chr&gt; ...
## $ X__3                                                                                            &lt;chr&gt; ...
## $ Wähler                                                                                          &lt;chr&gt; ...
## $ X__4                                                                                            &lt;chr&gt; ...
## $ X__5                                                                                            &lt;chr&gt; ...
## $ X__6                                                                                            &lt;chr&gt; ...
## $ Ungültige                                                                                       &lt;chr&gt; ...
## $ X__7                                                                                            &lt;chr&gt; ...
## $ X__8                                                                                            &lt;chr&gt; ...
## $ X__9                                                                                            &lt;chr&gt; ...
## $ Gültige                                                                                         &lt;chr&gt; ...
## $ X__10                                                                                           &lt;chr&gt; ...
## $ X__11                                                                                           &lt;chr&gt; ...
## $ X__12                                                                                           &lt;chr&gt; ...
## $ `Christlich Demokratische Union Deutschlands`                                                   &lt;chr&gt; ...
## $ X__13                                                                                           &lt;chr&gt; ...
## $ X__14                                                                                           &lt;chr&gt; ...
## $ X__15                                                                                           &lt;chr&gt; ...
## $ `Sozialdemokratische Partei Deutschlands`                                                       &lt;chr&gt; ...
## $ X__16                                                                                           &lt;chr&gt; ...
## $ X__17                                                                                           &lt;chr&gt; ...
## $ X__18                                                                                           &lt;chr&gt; ...
## $ `DIE LINKE`                                                                                     &lt;chr&gt; ...
## $ X__19                                                                                           &lt;chr&gt; ...
## $ X__20                                                                                           &lt;chr&gt; ...
## $ X__21                                                                                           &lt;chr&gt; ...
## $ `BÜNDNIS 90/DIE GRÜNEN`                                                                         &lt;chr&gt; ...
## $ X__22                                                                                           &lt;chr&gt; ...
## $ X__23                                                                                           &lt;chr&gt; ...
## $ X__24                                                                                           &lt;chr&gt; ...
## $ `Christlich-Soziale Union in Bayern e.V.`                                                       &lt;chr&gt; ...
## $ X__25                                                                                           &lt;chr&gt; ...
## $ X__26                                                                                           &lt;chr&gt; ...
## $ X__27                                                                                           &lt;chr&gt; ...
## $ `Freie Demokratische Partei`                                                                    &lt;chr&gt; ...
## $ X__28                                                                                           &lt;chr&gt; ...
## $ X__29                                                                                           &lt;chr&gt; ...
## $ X__30                                                                                           &lt;chr&gt; ...
## $ `Alternative für Deutschland`                                                                   &lt;chr&gt; ...
## $ X__31                                                                                           &lt;chr&gt; ...
## $ X__32                                                                                           &lt;chr&gt; ...
## $ X__33                                                                                           &lt;chr&gt; ...
## $ `Piratenpartei Deutschland`                                                                     &lt;chr&gt; ...
## $ X__34                                                                                           &lt;chr&gt; ...
## $ X__35                                                                                           &lt;chr&gt; ...
## $ X__36                                                                                           &lt;chr&gt; ...
## $ `Nationaldemokratische Partei Deutschlands`                                                     &lt;chr&gt; ...
## $ X__37                                                                                           &lt;chr&gt; ...
## $ X__38                                                                                           &lt;chr&gt; ...
## $ X__39                                                                                           &lt;chr&gt; ...
## $ `FREIE WÄHLER`                                                                                  &lt;chr&gt; ...
## $ X__40                                                                                           &lt;chr&gt; ...
## $ X__41                                                                                           &lt;chr&gt; ...
## $ X__42                                                                                           &lt;chr&gt; ...
## $ `PARTEI MENSCH UMWELT TIERSCHUTZ`                                                               &lt;chr&gt; ...
## $ X__43                                                                                           &lt;chr&gt; ...
## $ X__44                                                                                           &lt;chr&gt; ...
## $ X__45                                                                                           &lt;chr&gt; ...
## $ `Ökologisch-Demokratische Partei`                                                               &lt;chr&gt; ...
## $ X__46                                                                                           &lt;chr&gt; ...
## $ X__47                                                                                           &lt;chr&gt; ...
## $ X__48                                                                                           &lt;chr&gt; ...
## $ `Partei für Arbeit, Rechtsstaat, Tierschutz, Elitenförderung und basisdemokratische Initiative` &lt;chr&gt; ...
## $ X__49                                                                                           &lt;chr&gt; ...
## $ X__50                                                                                           &lt;chr&gt; ...
## $ X__51                                                                                           &lt;chr&gt; ...
## $ Bayernpartei                                                                                    &lt;chr&gt; ...
## $ X__52                                                                                           &lt;chr&gt; ...
## $ X__53                                                                                           &lt;chr&gt; ...
## $ X__54                                                                                           &lt;chr&gt; ...
## $ `Ab jetzt...Demokratie durch Volksabstimmung`                                                   &lt;chr&gt; ...
## $ X__55                                                                                           &lt;chr&gt; ...
## $ X__56                                                                                           &lt;chr&gt; ...
## $ X__57                                                                                           &lt;chr&gt; ...
## $ `Partei der Vernunft`                                                                           &lt;chr&gt; ...
## $ X__58                                                                                           &lt;chr&gt; ...
## $ X__59                                                                                           &lt;chr&gt; ...
## $ X__60                                                                                           &lt;chr&gt; ...
## $ `Marxistisch-Leninistische Partei Deutschlands`                                                 &lt;chr&gt; ...
## $ X__61                                                                                           &lt;chr&gt; ...
## $ X__62                                                                                           &lt;chr&gt; ...
## $ X__63                                                                                           &lt;chr&gt; ...
## $ `Bürgerrechtsbewegung Solidarität`                                                              &lt;chr&gt; ...
## $ X__64                                                                                           &lt;chr&gt; ...
## $ X__65                                                                                           &lt;chr&gt; ...
## $ X__66                                                                                           &lt;chr&gt; ...
## $ `Sozialistische Gleichheitspartei, Vierte Internationale`                                       &lt;chr&gt; ...
## $ X__67                                                                                           &lt;chr&gt; ...
## $ X__68                                                                                           &lt;chr&gt; ...
## $ X__69                                                                                           &lt;chr&gt; ...
## $ `DIE RECHTE`                                                                                    &lt;chr&gt; ...
## $ X__70                                                                                           &lt;chr&gt; ...
## $ X__71                                                                                           &lt;chr&gt; ...
## $ X__72                                                                                           &lt;chr&gt; ...
## $ `Allianz Deutscher Demokraten`                                                                  &lt;chr&gt; ...
## $ X__73                                                                                           &lt;chr&gt; ...
## $ X__74                                                                                           &lt;chr&gt; ...
## $ X__75                                                                                           &lt;chr&gt; ...
## $ `Allianz für Menschenrechte, Tier- und Naturschutz`                                             &lt;chr&gt; ...
## $ X__76                                                                                           &lt;chr&gt; ...
## $ X__77                                                                                           &lt;chr&gt; ...
## $ X__78                                                                                           &lt;chr&gt; ...
## $ `bergpartei, die überpartei`                                                                    &lt;chr&gt; ...
## $ X__79                                                                                           &lt;chr&gt; ...
## $ X__80                                                                                           &lt;chr&gt; ...
## $ X__81                                                                                           &lt;chr&gt; ...
## $ `Bündnis Grundeinkommen`                                                                        &lt;chr&gt; ...
## $ X__82                                                                                           &lt;chr&gt; ...
## $ X__83                                                                                           &lt;chr&gt; ...
## $ X__84                                                                                           &lt;chr&gt; ...
## $ `DEMOKRATIE IN BEWEGUNG`                                                                        &lt;chr&gt; ...
## $ X__85                                                                                           &lt;chr&gt; ...
## $ X__86                                                                                           &lt;chr&gt; ...
## $ X__87                                                                                           &lt;chr&gt; ...
## $ `Deutsche Kommunistische Partei`                                                                &lt;chr&gt; ...
## $ X__88                                                                                           &lt;chr&gt; ...
## $ X__89                                                                                           &lt;chr&gt; ...
## $ X__90                                                                                           &lt;chr&gt; ...
## $ `Deutsche Mitte`                                                                                &lt;chr&gt; ...
## $ X__91                                                                                           &lt;chr&gt; ...
## $ X__92                                                                                           &lt;chr&gt; ...
## $ X__93                                                                                           &lt;chr&gt; ...
## $ `Die Grauen – Für alle Generationen`                                                            &lt;chr&gt; ...
## $ X__94                                                                                           &lt;chr&gt; ...
## $ X__95                                                                                           &lt;chr&gt; ...
## $ X__96                                                                                           &lt;chr&gt; ...
## $ `Die Urbane. Eine HipHop Partei`                                                                &lt;chr&gt; ...
## $ X__97                                                                                           &lt;chr&gt; ...
## $ X__98                                                                                           &lt;chr&gt; ...
## $ X__99                                                                                           &lt;chr&gt; ...
## $ `Madgeburger Gartenpartei`                                                                      &lt;chr&gt; ...
## $ X__100                                                                                          &lt;chr&gt; ...
## $ X__101                                                                                          &lt;chr&gt; ...
## $ X__102                                                                                          &lt;chr&gt; ...
## $ `Menschliche Welt`                                                                              &lt;chr&gt; ...
## $ X__103                                                                                          &lt;chr&gt; ...
## $ X__104                                                                                          &lt;chr&gt; ...
## $ X__105                                                                                          &lt;chr&gt; ...
## $ `Partei der Humanisten`                                                                         &lt;chr&gt; ...
## $ X__106                                                                                          &lt;chr&gt; ...
## $ X__107                                                                                          &lt;chr&gt; ...
## $ X__108                                                                                          &lt;chr&gt; ...
## $ `Partei für Gesundheitsforschung`                                                               &lt;chr&gt; ...
## $ X__109                                                                                          &lt;chr&gt; ...
## $ X__110                                                                                          &lt;chr&gt; ...
## $ X__111                                                                                          &lt;chr&gt; ...
## $ `V-Partei³ - Partei für Veränderung, Vegetarier und Veganer`                                    &lt;chr&gt; ...
## $ X__112                                                                                          &lt;chr&gt; ...
## $ X__113                                                                                          &lt;chr&gt; ...
## $ X__114                                                                                          &lt;chr&gt; ...
## $ `Bündnis C - Christen für Deutschland`                                                          &lt;chr&gt; ...
## $ X__115                                                                                          &lt;chr&gt; ...
## $ X__116                                                                                          &lt;chr&gt; ...
## $ X__117                                                                                          &lt;chr&gt; ...
## $ `DIE EINHEIT`                                                                                   &lt;chr&gt; ...
## $ X__118                                                                                          &lt;chr&gt; ...
## $ X__119                                                                                          &lt;chr&gt; ...
## $ X__120                                                                                          &lt;chr&gt; ...
## $ `Die Violetten`                                                                                 &lt;chr&gt; ...
## $ X__121                                                                                          &lt;chr&gt; ...
## $ X__122                                                                                          &lt;chr&gt; ...
## $ X__123                                                                                          &lt;chr&gt; ...
## $ `Familien-Partei Deutschlands`                                                                  &lt;chr&gt; ...
## $ X__124                                                                                          &lt;chr&gt; ...
## $ X__125                                                                                          &lt;chr&gt; ...
## $ X__126                                                                                          &lt;chr&gt; ...
## $ `Feministische Partei DIE FRAUEN`                                                               &lt;chr&gt; ...
## $ X__127                                                                                          &lt;chr&gt; ...
## $ X__128                                                                                          &lt;chr&gt; ...
## $ X__129                                                                                          &lt;chr&gt; ...
## $ Mieterpartei                                                                                    &lt;chr&gt; ...
## $ X__130                                                                                          &lt;chr&gt; ...
## $ X__131                                                                                          &lt;chr&gt; ...
## $ X__132                                                                                          &lt;chr&gt; ...
## $ `Neue Liberale – Die Sozialliberalen`                                                           &lt;chr&gt; ...
## $ X__133                                                                                          &lt;chr&gt; ...
## $ X__134                                                                                          &lt;chr&gt; ...
## $ X__135                                                                                          &lt;chr&gt; ...
## $ `UNABHÄNGIGE für bürgernahe Demokratie`                                                         &lt;chr&gt; ...
## $ X__136                                                                                          &lt;chr&gt; ...
## $ X__137                                                                                          &lt;chr&gt; ...
## $ X__138                                                                                          &lt;chr&gt; ...
## $ Übrige                                                                                          &lt;chr&gt; ...
## $ X__139                                                                                          &lt;chr&gt; ...
## $ X__140                                                                                          &lt;chr&gt; ...
## $ X__141                                                                                          &lt;chr&gt; ...</code></pre>
<p>In the next step, this file needs to be cleaned. The goal is to have the columns with the German states and the absolute votes and correspondent percentage values of the 6 parties (i.e. CDU/CSU, SPD, FDP, AfD, Die Linke, and Gruenen) represented in the Bundestag. Note: Gruenen is written without the German umlauts (<a href="https://learn-german-easily.com/german-umlauts" class="uri">https://learn-german-easily.com/german-umlauts</a>) since it is showing as an error.</p>
<p>To start the cleaning process, we need to create two vectors. The first one corresponds to even columns from the 20th to the 190th. These columns represent the “Zweitstimmen Endgueltig”, that is, the votes of each party that we are interested in maintaining. The second vector corresponds to the odd columns from the 3rd to the 87th. These columns will be deleted because they represent the votes of a specific candidate and not of a party - see German Federal Election System (<a href="http://www.spiegel.de/international/germany/german-election-system-explained-a-923243.html" class="uri">http://www.spiegel.de/international/germany/german-election-system-explained-a-923243.html</a>)</p>
<pre class="r"><code># create two new vectors
even_columns&lt;-seq(20,190,2) 
odd_columns&lt;-seq(3,87,2) </code></pre>
<p>Now, it’s time to tidy up the data frame. Select the variables of interest and use the <code>slice()</code> function to select the rows which correspond to the 16 States of Germany. Afterwards, rename and delete some columns. Use <code>mutate_at</code> to transform some columns to numeric or character type. Subsequently, use <code>mutate()</code> to create new variables like the percentage values for each party in each State. Finally, reorder columns and delete some of them.</p>
<pre class="r"><code># clean the German Federal Election data frame

germany_tidy &lt;- germany_elections_untidy %&gt;%
  # select columns of interest
  select(1:2, even_columns) %&gt;%
  # select rows that correspond to the 16 States of Germany
  slice(c(14, 22, 30, 62, 66, 78, 89, 103, 169, 187, 211, 221, 238, 286, 326, 332)) %&gt;%
  # rename columns&#39; names - &quot;new name&quot; = &quot;old name&quot;
  rename(state = Gebiet, CDU = X__14, SPD = X__17, DieLinke = X__20, 
         Gruenen = X__23, CSU = X__26, FDP = X__29, AfD = X__32, 
         Piraten = X__35, NPD = X__38, FW = X__41, PMUT = X__44, 
         ODP = X__47, PArbeit = X__50, BP = X__53, ADV = X__56,
         PdV = X__59, MLPD = X__62, BS = X__65, SP = X__68, 
         DR = X__71, ADD = X__74, AMTS = X__77, BergP = X__80, 
         BG = X__83, DBewe = X__86, DKP = X__89, DMitte = X__92, 
         Grauen = X__95, UrbaneHipHop = X__98, MPartei = X__101, 
         MWelt = X__104, PH = X__107, PGesund = X__110, 
         VPartei = X__113, BCD = X__116, Einheit = X__119, 
         Violetten = X__122, FamilienP = X__125, 
         FPDF = X__128, Mieter = X__131, NLiberale = X__134, 
         UBD = X__137, U = X__140) %&gt;%
  # delete columns
  select(-odd_columns) %&gt;%
  # mutate variables to numeric from the 3rd to the 45th column 
  mutate_at(vars(3:45), as.numeric) %&gt;%
  # mutate 1st column to character
  mutate_at(vars(1), as.character) %&gt;%
  # create the CDU/CSU variable and all the percentage values of each party for each state 
  mutate(CDU_CSU = rowSums(.[c(&quot;CDU&quot;, &quot;CSU&quot;)], na.rm = TRUE),
         CDU_CSU_perc = CDU_CSU / rowSums(.[3:45], na.rm = TRUE) * 100,
         SPD_perc = SPD / rowSums(.[3:45], na.rm = TRUE) * 100,
         DieLinke_perc = DieLinke / rowSums(.[3:45], na.rm = TRUE) * 100,
         Gruenen_perc = Gruenen / rowSums(.[3:45], na.rm = TRUE) * 100,
         FDP_perc = FDP / rowSums(.[3:45], na.rm = TRUE) * 100,
         AfD_perc = AfD / rowSums(.[3:45], na.rm = TRUE) * 100) %&gt;%
  # reorder and delete columns 10 to 45
  select(Nr, state, CDU_CSU_perc,SPD_perc,
         DieLinke_perc, Gruenen_perc, FDP_perc, 
         AfD_perc, CDU_CSU, everything(), -10:-45) </code></pre>
<p>However, we still need to recode the values of the Nr variable as they are not consistent with the values related to the German States within the shapefile of Germany that we have to load right after.</p>
<pre class="r"><code># recode variable NR - &quot;old value&quot; = &quot;new value&quot;
Nr_recode &lt;- c(&quot;10&quot; = &quot;11&quot;, &quot;9&quot; = &quot;1&quot;, &quot;1&quot; = &quot;14&quot;, &quot;4&quot; = &quot;4&quot;, 
               &quot;13&quot; = &quot;7&quot;, &quot;8&quot; = &quot;0&quot;,&quot;5&quot; = &quot;9&quot;, &quot;6&quot; = &quot;6&quot;, &quot;12&quot; = &quot;3&quot;, 
               &quot;7&quot; = &quot;10&quot;, &quot;14&quot; = &quot;12&quot;, &quot;11&quot; = &quot;2&quot;, &quot;15&quot; = &quot;13&quot;,
               &quot;2&quot; = &quot;5&quot;, &quot;16&quot; = &quot;15&quot;, &quot;3&quot; = &quot;8&quot;) 

# assign new values to the Nr variable
germany_tidy$Nr &lt;- Nr_recode[germany_tidy$Nr] </code></pre>
<p>Thereby, we need to finish the wrangling of the German Federal Election data frame. This is how it looks:</p>
<pre class="r"><code>glimpse(germany_tidy)</code></pre>
<pre><code>## Observations: 16
## Variables: 16
## $ Nr            &lt;chr&gt; &quot;14&quot;, &quot;7&quot;, &quot;5&quot;, &quot;8&quot;, &quot;4&quot;, &quot;3&quot;, &quot;13&quot;, &quot;2&quot;, &quot;9&quot;, &quot;...
## $ state         &lt;chr&gt; &quot;Schleswig-Holstein&quot;, &quot;Mecklenburg-Vorpommern&quot;, ...
## $ CDU_CSU_perc  &lt;dbl&gt; 33.98934, 33.12773, 27.22698, 34.93629, 25.09877...
## $ SPD_perc      &lt;dbl&gt; 23.28605, 15.06065, 23.50044, 27.44090, 26.76432...
## $ DieLinke_perc &lt;dbl&gt; 7.267138, 17.829242, 12.173991, 6.950305, 13.429...
## $ Gruenen_perc  &lt;dbl&gt; 11.976340, 4.260224, 13.942183, 8.711579, 11.053...
## $ FDP_perc      &lt;dbl&gt; 12.639241, 6.241981, 10.797266, 9.283564, 9.3451...
## $ AfD_perc      &lt;dbl&gt; 8.181315, 18.588371, 7.822267, 9.088965, 10.0035...
## $ CDU_CSU       &lt;dbl&gt; 583135, 307263, 266312, 1623481, 83409, 397839, ...
## $ CDU           &lt;dbl&gt; 583135, 307263, 266312, 1623481, 83409, 397839, ...
## $ SPD           &lt;dbl&gt; 399505, 139689, 229862, 1275172, 88944, 261822, ...
## $ DieLinke      &lt;dbl&gt; 124678, 165368, 119076, 322979, 44629, 255721, 2...
## $ Gruenen       &lt;dbl&gt; 205471, 39514, 136371, 404825, 36733, 74971, 462...
## $ CSU           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...
## $ FDP           &lt;dbl&gt; 216844, 57895, 105610, 431405, 31056, 105485, 96...
## $ AfD           &lt;dbl&gt; 140362, 172409, 76511, 422362, 33244, 301103, 24...</code></pre>
<p>Nonetheless, our goal is to create a map of Germany with the results of the German Federal Elections and for that, we need to load a shapefile of Germany. Go ahead and download the shapefile and save it in your working directory. After that, use the function <code>readOGR()</code> from the rgdal package to load the file in R.</p>
<pre class="r"><code># load shape file
germany &lt;- readOGR(here(layer = &quot;DEU_adm1.shp&quot;), use_iconv = TRUE, encoding = &quot;UTF-8&quot;) </code></pre>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;C:\Users\Diana\Downloads\hugoblog\DEU_adm1.shp&quot;, layer: &quot;DEU_adm1&quot;
## with 16 features
## It has 16 fields</code></pre>
<pre class="r"><code>plot(germany)</code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-7-1.png" width="672" /> Ok, by now we will have one shapefile with the map of Germany and one data frame with the results of the German Federal Elections. So, they are separated from each other, but we must join them to visualize the elections’ results. Therefore, let’s prepare the shapefile to join the German Federal election data frame by creating a new variable called germany_states.</p>
<pre class="r"><code># prepare the shapefile with the map of germany to make it possible to join the dataframe of german elections
germany_states &lt;- germany@data$NAME_1
germany@data$germany_states &lt;- germany_states </code></pre>
<p>Next step will be to filter the state variable present in the German Federal election data frame with the correspondent variable created before in the shapefile.</p>
<pre class="r"><code># filter data for germany states
elections_data &lt;- germany_tidy %&gt;% 
  filter(state %in% germany_states) </code></pre>
<p>Now, everything is set to join both datasets, the shapefile and the German Federal Election data frame called elections_data.</p>
<p>Let’s join both.</p>
<pre class="r"><code># join datasets
germany@data &lt;- germany@data %&gt;% 
  left_join(elections_data,by = c(&quot;germany_states&quot; = &quot;state&quot;)) 

# important step for the indexes to join
rownames(germany@data) &lt;- germany@data$germany_states </code></pre>
<p>Finally, we must transform the previous object in a data frame. This is needed since plot shapefiles is not possible, only data frames. With this goal in mind, use the <code>tidy()</code> function from the broom package.</p>
<pre class="r"><code># transform the previous object in a dataframe
germany_dataframe &lt;- tidy(germany) %&gt;% 
  left_join(., germany@data, by = c(&quot;id&quot; = &quot;Nr&quot;)) </code></pre>
<p>Now, the data can be plotted. Here you can see a very basic plot with the share of the coalition CDU/CSU vote (%) in each State of Germany.</p>
<pre class="r"><code># plot
plot_basic_CDU_CSU &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  # we need to add this filter so that the Berlin 
  # and Bremen results can be mapped and 
  # distinguished from the Brandeburg and Niedersachsen results, respectively
  geom_polygon(aes(fill=CDU_CSU_perc), color = &quot;white&quot;, 
               data =filter(germany_dataframe, !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=CDU_CSU_perc), color = &quot;white&quot;, 
               data =filter(germany_dataframe, NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  theme_minimal() +
  coord_map()

plot_basic_CDU_CSU</code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>But given the power of the <code>ggplot2</code> package, we can create a better plot than the last one. Let’s start by removing this background and create a common theme and legend design for all plots.</p>
<pre class="r"><code># creation of a common theme for all plots
common_theme &lt;- theme(title = element_text(family = &quot;Cambria&quot;, size = 12, hjust = 0.5),
        plot.title = element_text(family = &quot;Cambria&quot;, 
                                  color = &quot;#22211d&quot;, 
                                  size = 20, 
                                  hjust = 0),
        plot.subtitle = element_text(family = &quot;Cambria&quot;, 
                                     face = &quot;italic&quot;, 
                                     color = &quot;#22211d&quot;, 
                                     size = 14, 
                                     hjust = 0), 
        plot.caption = element_text(family = &quot;Cambria&quot;, 
                                    color = &quot;#22211d&quot;, 
                                    size = 10, 
                                    hjust = 0),
        plot.background = element_rect(fill = &quot;#f5f5f2&quot;, 
                                       color = NA), 
        panel.background = element_rect(fill = &quot;#f5f5f2&quot;, 
                                        color = NA),
        legend.background = element_rect(fill = &quot;#f5f5f2&quot;, 
                                         color = NA),
        legend.text = element_text(family = &quot;Cambria&quot;, 
                                   size = 10),
        axis.line = element_blank(), 
        axis.ticks = element_blank(),
        panel.grid = element_blank(), 
        axis.title = element_blank(),
        axis.text = element_blank(),
        legend.position = &quot;right&quot;)

# create a common legend design - given that the dependent variable is continous, we&#39;ll use guide_colorbar
guide_legend &lt;- guide_colorbar(
      direction = &quot;horizontal&quot;,
      barheight = unit(2, units = &quot;mm&quot;),
      barwidth = unit(50, units = &quot;mm&quot;),
      draw.ulim = F,
      title.position = &#39;top&#39;,
      title.hjust = 0.5,
      label.hjust = 0.5)</code></pre>
<p>In the following steps, we’ll create a plot for each one of the 6 parties represented in the Bundestag. The first one corresponds to the CDU/CSU coalition results. Note: The highest percentage values will be black due to the color usually assigned to this coalition.</p>
<pre class="r"><code># plot CDU/CSU results
plot_CDU_CSU &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill=CDU_CSU_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=CDU_CSU_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) +
  coord_map() +
  labs(title = &quot;German Federal Election 2017&quot;, 
       subtitle = &quot;Share of the CDU/CSU Vote (%)&quot;, 
       caption = &quot;Source: Federal Returning Office&quot; ) + 
  common_theme +
  scale_fill_gradient2(
    low = &quot;#F2F2F2&quot;,
    mid= &quot;#A4A4A4&quot;,
    high = &quot;#000000&quot;,
    midpoint = 30.5,
    name = &quot;Share of Vote (%)&quot;,
    limits = c(22,40), 
    breaks = c(22, 25, 28, 31, 34, 37, 40),
    guide = guide_legend) 

plot_CDU_CSU </code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>The darker the color, the highest the vote percentage. We can see that the CDU/CSU coalition had stronger results in South and West Germany, whereas in former East Germany had weaker results.</p>
<p>Let’s now plot the SPD results. In this case, the highest values will be assigned to the party’s red color.</p>
<pre class="r"><code># plot SPD
plot_SPD &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill=SPD_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=SPD_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  coord_map() +
  labs(title = &quot;German Federal Election 2017&quot;, 
       subtitle = &quot;Share of the SPD Vote (%)&quot;, 
       caption = &quot;Source: Federal Returning Office&quot; ) + 
  common_theme +
  scale_fill_gradient2(
    low = &quot;#FBEFEF&quot;,
    mid= &quot;#F78181&quot;,
    high = &quot;#E3000F&quot;,
    midpoint = 19,
    name = &quot;Share of Vote (%)&quot;,
    limits = c(10,28), 
    breaks = c(10, 13, 16, 19, 22, 25, 28),
    guide = guide_legend) 

plot_SPD</code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>SPD had a historic election loss, and we can easily see why was that the case. Only in the Northwest States, it had percentages above 20%. In the South and in former East Germany the results were disastrous.</p>
<p>Moving on to the next party, FDP, its associated color is yellow. Consequently, a darker yellow will mean a stronger result, while a lighter yellow a weaker one.</p>
<pre class="r"><code># plot FDP
plot_FDP &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill=FDP_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=FDP_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  coord_map() +
  labs(title = &quot;German Federal Election 2017&quot;, 
       subtitle = &quot;Share of the FDP Vote (%)&quot;, 
       caption = &quot;Source: Federal Returning Office&quot; ) + 
  common_theme +
  scale_fill_gradient2(
    low = &quot;#F5F6CE&quot;,
    mid= &quot;#F3F781&quot;,
    high = &quot;#FFC300&quot;,
    midpoint = 9,
    name = &quot;Share of Vote (%)&quot;,
    limits = c(6,14), 
    breaks = c(6, 8, 10, 12, 14),
    guide = guide_legend) 

plot_FDP </code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-16-1.png" width="672" /> The visualization of this map shows a better result in the Western States and the worst performance in the Eastern States.</p>
<p>The fourth party analyzed will be the Gruenen. As the name implies the party’s color is green.</p>
<pre class="r"><code>plot_Gruenen &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill=Gruenen_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=Gruenen_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  coord_map() +
  labs(title = &quot;German Federal Election 2017&quot;, 
       subtitle = &quot;Share of the Gruenen Vote (%)&quot;, 
       caption = &quot;Source: Federal Returning Office&quot; ) + 
  common_theme +
  scale_fill_gradient2(
    low = &quot;#D8F6CE&quot;,
    mid= &quot;#82FA58&quot;,
    high = &quot;#19A229&quot;,
    midpoint = 8,
    name = &quot;Share of Vote (%)&quot;,
    limits = c(3,14), 
    breaks = c(3, 5, 7, 9, 11, 14),
    guide = guide_legend) 

plot_Gruenen</code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-17-1.png" width="672" /> The Gruenen party is stronger in Baden-Wuerttemberg State and in the city-states of Hamburg, Bremen, and Berlin.</p>
<p>We still have two parties left to analyze. The Die Linke party will be the next one. Note: Purple is the color of this party.</p>
<pre class="r"><code># Die Linke plot
plot_DieLinke &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill=DieLinke_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=DieLinke_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, 
                            NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) +
  coord_map() +
  labs(title = &quot;German Federal Election 2017&quot;, 
       subtitle = &quot;Share of the Die Linke  Vote (%)&quot;, 
       caption = &quot;Source: Federal Returning Office&quot; ) + 
  common_theme +
  theme(legend.position = &quot;right&quot;) +
  scale_fill_gradient2(
    low = &quot;#ECCEF5&quot;,
    mid= &quot;#DA81F5&quot;,
    high = &quot;#B3315D&quot;,
    midpoint = 12.5,
    name = &quot;Share of Vote (%)&quot;,
    limits = c(6,19), 
    breaks = c(5, 7, 9, 11, 13, 15, 17, 19),
    guide = guide_legend) 

plot_DieLinke </code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-18-1.png" width="672" /> In this visualization, we can clearly notice how much stronger is Die Linke in the former territories of East Germany.</p>
<p>Finally, the last party to be assessed is the AFD. Note: Cyan represents the party’s color.</p>
<pre class="r"><code># AfD party
plot_AfD &lt;- germany_dataframe %&gt;%
  ggplot(aes(x = long, y = lat, group = group)) +
  geom_polygon(aes(fill=AfD_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, !NAME_1 %in% c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  geom_polygon(aes(fill=AfD_perc), 
               color = &quot;#7F7F7F&quot;, 
               data =filter(germany_dataframe, NAME_1 %in%  c(&quot;Berlin&quot;, &quot;Bremen&quot;))) + 
  coord_map() +
  labs(title = &quot;German Federal Election 2017&quot;, 
       subtitle = &quot;Share of the AfD Vote (%)&quot;, 
       caption = &quot;Source: Federal Returning Office&quot; ) + 
  common_theme +
  scale_fill_gradient2(
    low = &quot;#EFFBFB&quot;,
    mid= &quot;#A9D0F5&quot;,
    high = &quot;#009DE0&quot;,
    midpoint = 17.5,
    name = &quot;Share of the AfD Vote(%)&quot;,
    limits = c(7,28), 
    breaks = c(7, 10, 13, 16, 19, 22, 25, 28),
    guide = guide_legend)

plot_AfD</code></pre>
<p><img src="../../../post/2018-06-29-using-r-to-analyse-the-german-federal-election_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Similarly to the Die Linke, though with highest percentages, the AfD party was much stronger in the East. In all of these States, but Berlin, it had almost 20% or above.</p>
<p>Hope you have enjoyed! This was just a simple analysis using this awesome and powerful statistical language called R. These visualizations can be even better. Your feedback and suggestions are highly appreciated! I am still learning the tricks around R and your inputs will definitely help me improve. Thank you! Talk to you soon!</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="../../../tags/r/">R</a>

  <a class="tag tag--primary tag--small" href="../../../tags/maps/">maps</a>

  <a class="tag tag--primary tag--small" href="../../../tags/germany/">germany</a>

  <a class="tag tag--primary tag--small" href="../../../tags/elections/">elections</a>

  <a class="tag tag--primary tag--small" href="../../../tags/ggplot2/">ggplot2</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/07/linear-regression-in-r-a-simple-analysis/" data-tooltip="Tuition costs and gdp per capita: A linear regression analysis">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/07/about-me/" data-tooltip="About me">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://toscano84.github.io/2018/07/using-r-to-analyse-the-german-federal-election/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://toscano84.github.io/2018/07/using-r-to-analyse-the-german-federal-election/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Hugo Toscano. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/07/linear-regression-in-r-a-simple-analysis/" data-tooltip="Tuition costs and gdp per capita: A linear regression analysis">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/07/about-me/" data-tooltip="About me">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://toscano84.github.io/2018/07/using-r-to-analyse-the-german-federal-election/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://toscano84.github.io/2018/07/using-r-to-analyse-the-german-federal-election/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftoscano84.github.io%2F2018%2F07%2Fusing-r-to-analyse-the-german-federal-election%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Ftoscano84.github.io%2F2018%2F07%2Fusing-r-to-analyse-the-german-federal-election%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://res.cloudinary.com/dabczf7ag/image/upload/v1528704790/foto1.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Hugo Toscano</h4>
    
      <div id="about-card-bio">Contact: hugo_toscano@outlook.com</div>
    
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Stuttgart, Germany
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2019/04/euro-vs-dollar-working-with-lubridate-and-some-other-packages/">
                <h3 class="media-heading">Euro vs Dollar: Working with Lubridate and some other packages</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Welcome to this new post about the Euro versus Dollar historical exchange rate since 1999 to the present day. This post will deal with dates, so I will use mainly the lubridate package and some of its most important functions. I will do my best to show you the power and simplicity of this truly magnificent tool within the R universe. Nevertheless, I won’t be restricted only to lubridate and will use some other packages to deal with this type of data.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2019/03/clustering-the-pharmaceutical-industry-stocks/">
                <h3 class="media-heading">Clustering the Pharmaceutical Industry Stocks</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In this post I will use two of the most popular clustering methods, hierarchical clustering and k-means clustering, to analyse a data frame related to the financial variables of some pharmaceutical companies. Clustering is an unsupervised learning technique where we segment the data and identify meaningful groups that have similar characteristics. In our case, the goal will be to find these groups within the pharmaceutical companies data. Like we did in the previous posts we will start by loading the required packages to our analysis.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/12/text-mining-crime-and-punishment-and-anna-karenina-a-tidytext-approach/">
                <h3 class="media-heading">Text Mining Crime and Punishment &amp; Anna Karenina: A Tidytext Approach</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Welcome to a new exciting post! Today I have decided to bring you text mining applied to two of my favorite novels: Crime and Punishment by Dostoyevsky and Anna Karenina by Tolstoy. We will use mainly the incredible tidytext package developed by Julia Silge and David Robinson. You can read more about this package in the book of the same authors Text Mining with R: A Tidytext Approach.
Let us start the analysis of “Crime and Punishment” and “Anna Karenina” by loading the required packages.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/11/creating-a-model-to-increase-the-personal-loans-in-banks/">
                <h3 class="media-heading">Creating a Model to Predict if a Bank Customer accepts Personal Loans</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In this post, we will fit a multiple logistic regression model to predict the probability of a bank customer accepting a personal loan based on multiple variables to be described later. Logistic regression is a supervised learning algorithm were the independent variable has a qualitative nature. In this case, corresponding to the acceptance or rejection of a personal loan. This tutorial will build multiple logistic regression models and assess them.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/11/german-elections-in-the-21st-century/">
                <h3 class="media-heading">German Elections in the 21st Century</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In this blogpost, we will come back to the subject of the German Elections. We will try to show, mostly visually, the changes in election results during the 21st century. Thus, we will use data from the elections in 2002 to the last ones in 2017. The main focus will be mapping the results of the parties represented in the current Bundestag (German Parliament) during this time span. Let’s start our coding.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/10/predicting-airfares-on-new-routes/">
                <h3 class="media-heading">Predicting Airfares on New Routes a Supervised Learning Approach With Multiple Linear Regression</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This post will talk about multiple linear regression in the context of machine learning. Linear regression is one of the simplest and most used approaches for supervised learning. This tutorial will try to help you in how to use the linear regression algorithm. I am also new to the machine learning approach, but I’m very interested in this area given the predictive ability that you can gain from this. Let’s hope I can help you.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/10/hints-to-deal-with-missing-values-in-r/">
                <h3 class="media-heading">Hints to deal with Missing Values in R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In R missing values are usually, but not always, represented by letters NA. How to deal with missing values is very important in the data analytics world. Missing data can be sometimes tricky while analyzing a data frame, since it should be handled correctly for our statistical analysis. Before diving into more complex details about missing data, the first question that should be asked in any exploratory data analysis is: Do I have missing values in my database?</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/09/combine-data-frames-in-r/">
                <h3 class="media-heading">Combine Data frames in R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Sometimes, before we start to explore our data, we need to put them together. For instance, we might have them stored in different data frames and we have to join variables from two or more data frames in one. This post will talk about the different functions we can use to achieve that goal. We will be using the dplyr package to combine different data frames.
Firstly, we will show examples related to what is called mutating joins.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/08/a-leaflet-approach-to-coffee-chains-starbucks-versus-dunkin-donuts/">
                <h3 class="media-heading">A Leaflet approach to Coffee Chains: Starbucks versus Dunkin&#39; Donuts</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This post talks about making interactive visualizations in R with leaflet(). In this example, I’ll map the USA locations of two of the biggest coffee chains, Starbucks and Dunkin’ Donuts. This package allows us to map data and play interactively with it. For instance, we can zoom in or zoom out to augment or diminish map details, respectively. We can add markers that signal the position of our data in the map and move the mouse cursor over to get information about it.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://toscano84.github.io/2018/07/linear-regression-in-r-a-simple-analysis/">
                <h3 class="media-heading">Tuition costs and gdp per capita: A linear regression analysis</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This post will explore with R one of the simplest approaches to predict a response of a quantitative nature. This approach is called Linear Regression.
I will use a simple Linear Regression to study whether there is any relationship between the gross domestic product (gdp) per capita of each state in the USA and its tuition costs. Therefore, our predictor will be the gdp per capita per state and our response will be the tuition costs per state.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         12 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://res.cloudinary.com/dabczf7ag/image/upload/v1533024537/cover_new2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="../../../js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/toscano84.github.io\/2018\/07\/using-r-to-analyse-the-german-federal-election\/';
          
            this.page.identifier = '\/2018\/07\/using-r-to-analyse-the-german-federal-election\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'toscano84';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

